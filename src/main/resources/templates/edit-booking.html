<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
<div class="max-w-2xl mx-auto p-6 mt-10 bg-white shadow-lg rounded-lg">
    <h1 class="text-2xl font-bold mb-6 text-indigo-600 text-center">‚úè Edit Booking</h1>

    <form th:action="@{'/bookings/update/' + ${booking.id}}" method="post" class="space-y-5">

        <div>
            <label class="block font-semibold mb-1">User</label>
            <select name="userId" class="w-full border rounded-lg p-2">
                <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.name}" th:selected="${u.id == booking.user.id}"></option>
            </select>
        </div>

        <div>
            <label class="block font-semibold mb-1">Schedule</label>
            <select name="scheduleId" class="w-full border rounded-lg p-2">
                <option th:each="s : ${schedules}" th:value="${s.id}" 
                        th:selected="${s.id == booking.schedule.id}"
                        th:text="${s.route.from} + ' ‚Üí ' + ${s.route.destination} + ' | ' + ${#temporals.format(s.departureTime,'yyyy-MM-dd HH:mm')} + ' ‚Üí ' + ${#temporals.format(s.arrivalTime,'yyyy-MM-dd HH:mm')} + ' | Price: ‚Çπ' + ${s.price}"></option>
            </select>
        </div>

        <div>
            <label class="block font-semibold mb-1">Seat</label>
            <select name="seatId" class="w-full border rounded-lg p-2">
                <option th:each="st : ${seats}" th:value="${st.id}" th:text="${st.seatNumber}" th:selected="${st.id == booking.seat.id}"></option>
            </select>
        </div>

        <div>
            <label class="block font-semibold mb-1">Status</label>
            <select name="status" class="w-full border rounded-lg p-2">
                <option value="CONFIRMED" th:selected="${booking.status == 'CONFIRMED'}">CONFIRMED</option>
                <option value="CANCELLED" th:selected="${booking.status == 'CANCELLED'}">CANCELLED</option>
            </select>
        </div>

        <div>
            <label class="block font-semibold mb-1">Payment Status</label>
            <select name="paymentStatus" class="w-full border rounded-lg p-2">
                <option value="PAID" th:selected="${booking.paymentStatus == 'PAID'}">PAID</option>
                <option value="UNPAID" th:selected="${booking.paymentStatus == 'UNPAID'}">UNPAID</option>
                <option value="REFUNDED" th:selected="${booking.paymentStatus == 'REFUNDED'}">REFUNDED</option>
            </select>
        </div>

        <div class="flex justify-between">
            <a th:href="@{/bookings}" class="bg-gray-400 text-white px-4 py-2 rounded-lg hover:bg-gray-500">‚¨Ö Back</a>
            <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">üíæ Update</button>
        </div>
    </form>
</div>
</body>
</html>
