<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seats Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container {
            margin-top: 50px;
        }
        .card {
            border-radius: 20px;
            box-shadow: 0px 8px 20px rgba(0,0,0,0.1);
        }
        h2 {
            color: #0d47a1;
            font-weight: bold;
        }
        .btn-custom {
            border-radius: 30px;
            padding: 8px 20px;
        }
        .table {
            border-radius: 15px;
            overflow: hidden;
        }
        .table th {
            background-color: #1565c0;
            color: white;
        }
        .status-available {
            color: green;
            font-weight: bold;
        }
        .status-booked {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="card p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>🎟️ Seat Management</h2>
            
            <a th:href="@{/}" 
           class="bg-gray-500 text-green px-4 py-2 rounded-lg shadow hover:bg-gray-600">
            ⬅ Back to Home
        </a>
        
            <a th:href="@{/seats/add}" class="btn btn-success btn-custom">➕ Add Seat</a>
        </div>

        <table class="table table-hover align-middle text-center">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Seat Number</th>
                    <th>Class</th>
                    <th>Status</th>
                    <th>Available</th>
                    <th>Price</th>
                    <th>Schedule</th>
                    <th>Departure</th>
                    <th>Arrival</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            <tr th:each="seat : ${seats}">
                <td th:text="${seat.id}"></td>
                <td th:text="${seat.seatNumber}"></td>
                <td>
    <span th:switch="${seat.seatClass}">
        <span th:case="'ECONOMY'">🪑 Economy</span>
        <span th:case="'BUSINESS'">💼 Business</span>
        <span th:case="'VIP'">👑 VIP</span>
        <span th:case="*">-</span>
    </span>
</td>
<td>
                    <span th:classappend="${seat.status == 'AVAILABLE'} ? 'status-available' : 'status-booked'"
                          th:text="${seat.status}"></span>
                </td>
                <td th:text="${seat.available ? '✅ Yes' : '❌ No'}"></td>
                <td th:text="'₹ ' + ${seat.price}"></td>
                <td th:text="${seat.schedule.route.from} + ' → ' + ${seat.schedule.route.destination}"></td>
                <td th:text="${#temporals.format(seat.schedule.departureTime, 'dd-MM-yyyy HH:mm')}"></td>
                <td th:text="${#temporals.format(seat.schedule.arrivalTime, 'dd-MM-yyyy HH:mm')}"></td>
                <td>
                    <a th:href="@{/seats/edit/{id}(id=${seat.id})}" class="btn btn-primary btn-sm">✏ Edit</a>
                    <a th:href="@{/seats/delete/{id}(id=${seat.id})}" class="btn btn-danger btn-sm"
                       onclick="return confirm('Are you sure you want to delete this seat?')">🗑 Delete</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
